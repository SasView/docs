
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sas.sascalc.invariant package &#8212; SasView 5.0.3 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="sas.sascalc.pr package" href="sas.sascalc.pr.html" />
    <link rel="prev" title="sas.sascalc.fit package" href="sas.sascalc.fit.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sas.sascalc.pr.html" title="sas.sascalc.pr package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sas.sascalc.fit.html" title="sas.sascalc.fit package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SasView 5.0.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../dev.html" >Developer Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="modules.html" >SasView</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="sas.html" >sas package</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="sas.sascalc.html" accesskey="U">sas.sascalc package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sas-sascalc-invariant-package">
<h1>sas.sascalc.invariant package</h1>
<div class="section" id="submodules">
<h2>Submodules</h2>
</div>
<div class="section" id="module-sas.sascalc.invariant.invariant">
<span id="sas-sascalc-invariant-invariant-module"></span><h2>sas.sascalc.invariant.invariant module</h2>
<p>This module implements invariant and its related computations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Gervaise B. Alina/UTK</td>
</tr>
<tr class="field-even field"><th class="field-name">author:</th><td class="field-body">Mathieu Doucet/UTK</td>
</tr>
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Jae Cho/UTK</td>
</tr>
<tr class="field-even field"><th class="field-name">author:</th><td class="field-body">Paul Butler/NIST/UD/UTK – refactor in 2020</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="sas.sascalc.invariant.invariant.Extrapolator">
<em class="property">class </em><code class="descclassname">sas.sascalc.invariant.invariant.</code><code class="descname">Extrapolator</code><span class="sig-paren">(</span><em>data</em>, <em>model=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Extrapolator"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Extrapolate I(q) distribution using a given model</p>
<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Extrapolator.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>power=None</em>, <em>qmin=None</em>, <em>qmax=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Extrapolator.fit"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Fit data for y = ax + b  return a and b</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>power</strong> – a fixed, otherwise None</li>
<li><strong>qmin</strong> – Minimum Q-value</li>
<li><strong>qmax</strong> – Maximum Q-value</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sas.sascalc.invariant.invariant.Guinier">
<em class="property">class </em><code class="descclassname">sas.sascalc.invariant.invariant.</code><code class="descname">Guinier</code><span class="sig-paren">(</span><em>scale=1</em>, <em>radius=60</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Guinier"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sas.sascalc.invariant.invariant.Transform" title="sas.sascalc.invariant.invariant.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">sas.sascalc.invariant.invariant.Transform</span></code></a></p>
<p>class of type Transform that performs operations related to guinier
function</p>
<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Guinier.evaluate_model">
<code class="descname">evaluate_model</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Guinier.evaluate_model"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>return F(x)= scale* e-((radius*x)**2/3)</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Guinier.evaluate_model_errors">
<code class="descname">evaluate_model_errors</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Guinier.evaluate_model_errors"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the error on I(q) for the given array of q-values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> – array of q-values</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Guinier.extract_model_parameters">
<code class="descname">extract_model_parameters</code><span class="sig-paren">(</span><em>constant</em>, <em>slope</em>, <em>dconstant=0</em>, <em>dslope=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Guinier.extract_model_parameters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>assign new value to the scale and the radius</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Guinier.linearize_q_value">
<code class="descname">linearize_q_value</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Guinier.linearize_q_value"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Transform the input q-value for linearization</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> – q-value</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">q*q</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator">
<em class="property">class </em><code class="descclassname">sas.sascalc.invariant.invariant.</code><code class="descname">InvariantCalculator</code><span class="sig-paren">(</span><em>data</em>, <em>background=0</em>, <em>scale=1</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Compute invariant if data is given.
Can provide volume fraction and surface area if the user provides
Porod constant  and contrast values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Precondition:</th><td class="field-body">the user must send a data of type DataLoader.Data1D
the user provide background and scale values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Note:</th><td class="field-body">Some computations depends on each others.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_data"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">self._data</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_extra_data_high">
<code class="descname">get_extra_data_high</code><span class="sig-paren">(</span><em>npts_in=None</em>, <em>q_end=10</em>, <em>npts=20</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_extra_data_high"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the extrapolated data used for the high-Q invariant calculation.
By default, the distribution will cover the data points used for the
extrapolation. The number of overlap points is a parameter (npts_in).
By default, the maximum q-value of the distribution will be Q_MAXIMUM,
the maximum q-value used when extrapolating for the purpose of the
invariant calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>npts_in</strong> – number of data points for which the
extrapolated data overlap</li>
<li><strong>q_end</strong> – is the maximum value to uses for extrapolated data</li>
<li><strong>npts</strong> – the number of points in the extrapolated distribution</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_extra_data_low">
<code class="descname">get_extra_data_low</code><span class="sig-paren">(</span><em>npts_in=None</em>, <em>q_start=None</em>, <em>npts=20</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_extra_data_low"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the extrapolated data used for the loew-Q invariant calculation.
By default, the distribution will cover the data points used for the
extrapolation. The number of overlap points is a parameter (npts_in).
By default, the maximum q-value of the distribution will be
the minimum q-value used when extrapolating for the purpose of the
invariant calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>npts_in</strong> – number of data points for which
the extrapolated data overlap</li>
<li><strong>q_start</strong> – is the minimum value to uses for extrapolated data</li>
<li><strong>npts</strong> – the number of points in the extrapolated distribution</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_extrapolation_power">
<code class="descname">get_extrapolation_power</code><span class="sig-paren">(</span><em>range='high'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_extrapolation_power"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the fitted power for power law function for a given
extrapolation range</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_qstar">
<code class="descname">get_qstar</code><span class="sig-paren">(</span><em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_qstar"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute the invariant of the local copy of data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>extrapolation</strong> – string to apply optional extrapolation</td>
</tr>
<tr class="field-even field"><th class="field-name">Return q_star:</th><td class="field-body">invariant of the data within data’s q range</td>
</tr>
<tr class="field-odd field"><th class="field-name">Warning:</th><td class="field-body">When using setting data to Data1D ,
the user is responsible of
checking that the scale and the background are
properly apply to the data</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_qstar_high">
<code class="descname">get_qstar_high</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_qstar_high"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute the invariant for extrapolated data at high q range.</p>
<dl class="docutils">
<dt>Implementation:</dt>
<dd>data = self._get_extra_data_high()
return self._get_qstar()</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return q_star:</th><td class="field-body">the invariant for data extrapolated at high q.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_qstar_low">
<code class="descname">get_qstar_low</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_qstar_low"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute the invariant for extrapolated data at low q range.</p>
<dl class="docutils">
<dt>Implementation:</dt>
<dd>data = self._get_extra_data_low()
return self._get_qstar()</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return q_star:</th><td class="field-body">the invariant for data extrapolated at low q.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_qstar_with_error">
<code class="descname">get_qstar_with_error</code><span class="sig-paren">(</span><em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_qstar_with_error"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute the invariant uncertainty.
This uncertainty computation depends on whether or not the data is
smeared.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>extrapolation</strong> – string to apply optional extrapolation</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">invariant, the invariant uncertainty</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_surface">
<code class="descname">get_surface</code><span class="sig-paren">(</span><em>contrast</em>, <em>porod_const</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_surface"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute the specific surface from the data.</p>
<p>Historically, Sv was computed with the invariant and the Porod
constant so as not to have to know the contrast in order to get the
Sv as:</p>
<blockquote>
<div>surface = (pi * V * (1- V) * porod_const) / q_star</div></blockquote>
<p>However, that turns out to be a pointless exercise since it
also requires a knowledge of the volume fractions and from the
volumer fraction and the invariant the contrast can be calculated as:</p>
<blockquote>
<div>contrast**2 = q_star / (2 * pi**2 * V * (1- V))</div></blockquote>
<p>Thus either way, mathematically it is always identical to computing
with only the contrast and the Porod Constant. up to and including
SasView versions 4.2.2 and 5.0.1 the implementation used the traditional
circular approach.</p>
<dl class="docutils">
<dt>Implementation: ::</dt>
<dd><p class="first">Given the above, as of SasView 4.3 and 5.0.2 we compute Sv simply
from the Porod Constant and the contrast between the two phases as:</p>
<blockquote class="last">
<div>surface = porod_const / (2 * pi contrast**2)</div></blockquote>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>contrast</strong> – contrast between the two phases</li>
<li><strong>porod_const</strong> – Porod constant</li>
<li><strong>extrapolation</strong> – string to apply optional extrapolation. This will
only be needed if and when the contrast term is calculated from
the invariant.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">specific surface</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_surface_with_error">
<code class="descname">get_surface_with_error</code><span class="sig-paren">(</span><em>contrast</em>, <em>porod_const</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_surface_with_error"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>As of SasView 4.3 and 5.0.3, the specific surface is computed directly
from the contrast and porod_constant wich are currently user inputs
with no option for any uncertainty so no uncertainty can be calculated.
However we include the uncertainty computation for future use if and
when these values get an uncertainty. This is given as:</p>
<blockquote>
<div>ds = sqrt[(s’_cp)**2 * dcp**2 + (s’_contrast)**2 * dcontrast**2]
where s’_x is the partial derivative of S with respect to x</div></blockquote>
<dl class="docutils">
<dt>which gives (this should be checked before using in anger)</dt>
<dd><dl class="first last docutils">
<dt>ds = sqrt((dporod_const**2 * contrast**2 + 4 * (porod_const *</dt>
<dd>dcontrast)**2) / (4 * pi**2 * contrast**6))</dd>
</dl>
</dd>
</dl>
<p>We also assume some users will never enter a value for uncertainty so
allow for None even when it is an option.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>contrast</strong> – contrast value eventually with the error</li>
<li><strong>porod_const</strong> – porod constant value eventually with the error</li>
<li><strong>extrapolation</strong> – string to apply optional extrapolation. This will
only be needed if and when the contrast term is calculated from
the invariant.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return s, ds:</th><td class="field-body"><p class="first last">the surface, with its uncertainty</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_volume_fraction">
<code class="descname">get_volume_fraction</code><span class="sig-paren">(</span><em>contrast</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_volume_fraction"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute volume fraction is deduced as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">q_star</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="n">contrast</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span> <span class="n">volume</span><span class="p">(</span> <span class="mi">1</span><span class="o">-</span> <span class="n">volume</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">10</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">)</span><span class="o">*</span><span class="n">q_star</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">*|</span><span class="n">contrast</span><span class="o">|</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">we</span> <span class="n">get</span> <span class="mi">2</span> <span class="n">values</span> <span class="n">of</span> <span class="n">volume</span><span class="p">:</span>
     <span class="k">with</span>   <span class="mi">1</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">k</span> <span class="o">&gt;=</span> <span class="mi">0</span>
     <span class="n">volume1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span> <span class="mi">4</span><span class="o">*</span><span class="n">k</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>
     <span class="n">volume2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span> <span class="mi">4</span><span class="o">*</span><span class="n">k</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>

<span class="n">q_star</span><span class="p">:</span> <span class="n">the</span> <span class="n">invariant</span> <span class="n">value</span> <span class="n">included</span> <span class="n">extrapolation</span> <span class="ow">is</span> <span class="n">applied</span>
             <span class="n">unit</span>  <span class="mi">1</span><span class="o">/</span><span class="n">A</span><span class="o">^</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="n">cm</span>
        <span class="n">q_star</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_qstar</span><span class="p">()</span>

<span class="n">the</span> <span class="n">result</span> <span class="n">returned</span> <span class="n">will</span> <span class="n">be</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">volume</span> <span class="o">&lt;=</span> <span class="mi">1</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>contrast</strong> – contrast value provides by the user of type float.
contrast unit is 1/A^(2)= 10^(16)cm^(2)</li>
<li><strong>extrapolation</strong> – string to apply optional extrapolation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">volume fraction</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body"><p class="first last">volume fraction must have no unit</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.get_volume_fraction_with_error">
<code class="descname">get_volume_fraction_with_error</code><span class="sig-paren">(</span><em>contrast</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.get_volume_fraction_with_error"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Compute uncertainty on volume value as well as the volume fraction
This uncertainty is given by the following equation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sigV</span> <span class="o">=</span> <span class="n">dV</span><span class="o">/</span><span class="n">dq_star</span> <span class="o">*</span> <span class="n">sigq_star</span>

<span class="n">so</span> <span class="n">that</span>
<span class="n">sigV</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">*</span> <span class="n">sigq_star</span><span class="p">)</span> <span class="o">/</span><span class="p">(</span><span class="n">q_star</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">k</span><span class="p">))</span>

<span class="k">for</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">10</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">)</span><span class="o">*</span><span class="n">q_star</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">*|</span><span class="n">contrast</span><span class="o">|</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="mi">10</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">)</span> <span class="n">converts</span> <span class="kn">from</span> <span class="nn">cm</span><span class="o">^-</span><span class="mi">1</span> <span class="n">to</span> <span class="n">A</span><span class="o">^-</span><span class="mi">1</span>
<span class="n">q_star</span><span class="p">:</span> <span class="n">the</span> <span class="n">invariant</span><span class="p">,</span> <span class="ow">in</span> <span class="n">cm</span><span class="o">^-</span><span class="mi">1</span><span class="n">A</span><span class="o">^-</span><span class="mi">3</span><span class="p">,</span> <span class="n">including</span> <span class="n">extrapolated</span> <span class="n">values</span>
    <span class="k">if</span> <span class="n">they</span> <span class="n">have</span> <span class="n">been</span> <span class="n">requested</span>
<span class="n">dq_star</span><span class="p">:</span> <span class="n">the</span> <span class="n">invariant</span> <span class="n">uncertainty</span>
<span class="n">dV</span><span class="p">:</span> <span class="n">the</span> <span class="n">volume</span> <span class="n">uncertainty</span>
</pre></div>
</div>
<p>The uncertainty will be set to -1 if it can’t be computed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>contrast</strong> – contrast value</li>
<li><strong>extrapolation</strong> – string to apply optional extrapolation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">V, dV = volume fraction, error on volume fraction</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.InvariantCalculator.set_extrapolation">
<code class="descname">set_extrapolation</code><span class="sig-paren">(</span><em>range</em>, <em>npts=4</em>, <em>function=None</em>, <em>power=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#InvariantCalculator.set_extrapolation"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Set the extrapolation parameters for the high or low Q-range.
Note that this does not turn extrapolation on or off.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>range</strong> – a keyword set the type of extrapolation . type string</li>
<li><strong>npts</strong> – the numbers of q points of data to consider
for extrapolation</li>
<li><strong>function</strong> – a keyword to select the function to use
for extrapolation.
of type string.</li>
<li><strong>power</strong> – an power to apply power_low function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sas.sascalc.invariant.invariant.PowerLaw">
<em class="property">class </em><code class="descclassname">sas.sascalc.invariant.invariant.</code><code class="descname">PowerLaw</code><span class="sig-paren">(</span><em>scale=1</em>, <em>power=4</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#PowerLaw"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sas.sascalc.invariant.invariant.Transform" title="sas.sascalc.invariant.invariant.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">sas.sascalc.invariant.invariant.Transform</span></code></a></p>
<p>class of type transform that perform operation related to power_law
function</p>
<dl class="method">
<dt id="sas.sascalc.invariant.invariant.PowerLaw.evaluate_model">
<code class="descname">evaluate_model</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#PowerLaw.evaluate_model"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>given a scale and a radius transform x, y using a power_law
function</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.PowerLaw.evaluate_model_errors">
<code class="descname">evaluate_model_errors</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#PowerLaw.evaluate_model_errors"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the error on I(q) for the given array of q-values
:param x: array of q-values</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.PowerLaw.extract_model_parameters">
<code class="descname">extract_model_parameters</code><span class="sig-paren">(</span><em>constant</em>, <em>slope</em>, <em>dconstant=0</em>, <em>dslope=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#PowerLaw.extract_model_parameters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Assign new value to the scale and the power</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.PowerLaw.linearize_q_value">
<code class="descname">linearize_q_value</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#PowerLaw.linearize_q_value"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Transform the input q-value for linearization</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> – q-value</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">log(q)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sas.sascalc.invariant.invariant.Transform">
<em class="property">class </em><code class="descclassname">sas.sascalc.invariant.invariant.</code><code class="descname">Transform</code><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Define interface that need to compute a function or an inverse
function given some x, y</p>
<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Transform.evaluate_model">
<code class="descname">evaluate_model</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform.evaluate_model"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns an array f(x) values where f is the Transform function.</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Transform.evaluate_model_errors">
<code class="descname">evaluate_model_errors</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform.evaluate_model_errors"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns an array of I(q) errors</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Transform.extract_model_parameters">
<code class="descname">extract_model_parameters</code><span class="sig-paren">(</span><em>constant</em>, <em>slope</em>, <em>dconstant=0</em>, <em>dslope=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform.extract_model_parameters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>set private member</p>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Transform.get_allowed_bins">
<code class="descname">get_allowed_bins</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform.get_allowed_bins"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Goes through the data points and returns a list of boolean values
to indicate whether each points is allowed by the model or not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> – Data1D object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Transform.linearize_data">
<code class="descname">linearize_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform.linearize_data"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Linearize data so that a linear fit can be performed.
Filter out the data that can’t be transformed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> – LoadData1D instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sas.sascalc.invariant.invariant.Transform.linearize_q_value">
<code class="descname">linearize_q_value</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant.html#Transform.linearize_q_value"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Transform the input q-value for linearization</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sas.sascalc.invariant.invariant_mapper">
<span id="sas-sascalc-invariant-invariant-mapper-module"></span><h2>sas.sascalc.invariant.invariant_mapper module</h2>
<p>This module is a wrapper to a map function. It allows to loop through 
different invariant objects to call the same function</p>
<dl class="function">
<dt id="sas.sascalc.invariant.invariant_mapper.get_qstar">
<code class="descclassname">sas.sascalc.invariant.invariant_mapper.</code><code class="descname">get_qstar</code><span class="sig-paren">(</span><em>inv</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant_mapper.html#get_qstar"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get invariant value (Q*)</p>
</dd></dl>

<dl class="function">
<dt id="sas.sascalc.invariant.invariant_mapper.get_qstar_with_error">
<code class="descclassname">sas.sascalc.invariant.invariant_mapper.</code><code class="descname">get_qstar_with_error</code><span class="sig-paren">(</span><em>inv</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant_mapper.html#get_qstar_with_error"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get invariant value with uncertainty</p>
</dd></dl>

<dl class="function">
<dt id="sas.sascalc.invariant.invariant_mapper.get_surface">
<code class="descclassname">sas.sascalc.invariant.invariant_mapper.</code><code class="descname">get_surface</code><span class="sig-paren">(</span><em>inv</em>, <em>contrast</em>, <em>porod_const</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant_mapper.html#get_surface"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get surface with uncertainty</p>
</dd></dl>

<dl class="function">
<dt id="sas.sascalc.invariant.invariant_mapper.get_surface_with_error">
<code class="descclassname">sas.sascalc.invariant.invariant_mapper.</code><code class="descname">get_surface_with_error</code><span class="sig-paren">(</span><em>inv</em>, <em>contrast</em>, <em>porod_const</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant_mapper.html#get_surface_with_error"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get surface with uncertainty</p>
</dd></dl>

<dl class="function">
<dt id="sas.sascalc.invariant.invariant_mapper.get_volume_fraction">
<code class="descclassname">sas.sascalc.invariant.invariant_mapper.</code><code class="descname">get_volume_fraction</code><span class="sig-paren">(</span><em>inv</em>, <em>contrast</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant_mapper.html#get_volume_fraction"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get volume fraction</p>
</dd></dl>

<dl class="function">
<dt id="sas.sascalc.invariant.invariant_mapper.get_volume_fraction_with_error">
<code class="descclassname">sas.sascalc.invariant.invariant_mapper.</code><code class="descname">get_volume_fraction_with_error</code><span class="sig-paren">(</span><em>inv</em>, <em>contrast</em>, <em>extrapolation=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sas/sascalc/invariant/invariant_mapper.html#get_volume_fraction_with_error"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get volume fraction with uncertainty</p>
</dd></dl>

</div>
<div class="section" id="module-sas.sascalc.invariant">
<span id="module-contents"></span><h2>Module contents</h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">sas.sascalc.invariant package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-sas.sascalc.invariant.invariant">sas.sascalc.invariant.invariant module</a></li>
<li><a class="reference internal" href="#module-sas.sascalc.invariant.invariant_mapper">sas.sascalc.invariant.invariant_mapper module</a></li>
<li><a class="reference internal" href="#module-sas.sascalc.invariant">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sas.sascalc.fit.html"
                        title="previous chapter">sas.sascalc.fit package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sas.sascalc.pr.html"
                        title="next chapter">sas.sascalc.pr package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/dev/sasview-api/sas.sascalc.invariant.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sas.sascalc.pr.html" title="sas.sascalc.pr package"
             >next</a> |</li>
        <li class="right" >
          <a href="sas.sascalc.fit.html" title="sas.sascalc.fit package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SasView 5.0.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../dev.html" >Developer Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="modules.html" >SasView</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="sas.html" >sas package</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="sas.sascalc.html" >sas.sascalc package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, The SasView Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>